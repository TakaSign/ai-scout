<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#070b14">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="AI Scout">
<link rel="manifest" href="manifest.json">
<title>AI Scout â€” æœ€æ–°AIãƒ‹ãƒ¥ãƒ¼ã‚¹</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #070b14;
    --surface: #0d1424;
    --surface2: #111927;
    --surface3: #0a1220;
    --border: #1e2d45;
    --border-bright: #2a3f5f;
    --blue: #3b82f6;
    --cyan: #06b6d4;
    --violet: #8b5cf6;
    --green: #10b981;
    --amber: #f59e0b;
    --red: #ef4444;
    --text: #f0f6ff;
    --text2: #8899b4;
    --text3: #3d5070;
    --r: 18px;
    --r-sm: 10px;
  }
  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

  html, body { height:100%; overscroll-behavior:none; }

  body {
    font-family:'Noto Sans JP',sans-serif;
    background:var(--bg);
    color:var(--text);
    max-width:430px;
    margin:0 auto;
    overflow-x:hidden;
    position:relative;
    min-height:100vh;
  }

  body::before {
    content:'';
    position:fixed; inset:0;
    background-image:
      linear-gradient(rgba(59,130,246,.04) 1px,transparent 1px),
      linear-gradient(90deg,rgba(59,130,246,.04) 1px,transparent 1px);
    background-size:40px 40px;
    pointer-events:none; z-index:0;
  }

  /* â”€â”€ STATUS BAR â”€â”€ */
  .status-bar {
    display:flex; justify-content:space-between; align-items:center;
    padding:12px 20px 6px;
    position:sticky; top:0; z-index:100;
    background:rgba(7,11,20,.88);
    backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px);
    border-bottom:1px solid rgba(59,130,246,.1);
  }
  .status-time { font-family:'Space Mono',monospace; font-size:13px; font-weight:700; }
  .status-icons { display:flex; gap:8px; align-items:center; font-size:13px; }

  /* â”€â”€ HEADER â”€â”€ */
  .app-header { padding:20px 20px 14px; position:relative; z-index:1; }
  .header-top { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:14px; }

  .logo { display:flex; align-items:center; gap:10px; }
  .logo-icon {
    width:40px; height:40px;
    background:linear-gradient(135deg,var(--blue),var(--violet));
    border-radius:12px; display:flex; align-items:center; justify-content:center;
    font-size:20px; box-shadow:0 0 22px rgba(59,130,246,.45);
  }
  .logo-name { font-family:'Space Mono',monospace; font-size:16px; font-weight:700; letter-spacing:.04em; }
  .logo-sub { font-size:10px; color:var(--blue); letter-spacing:.12em; text-transform:uppercase; margin-top:1px; }

  .header-right { text-align:right; }
  .date-txt { font-family:'Space Mono',monospace; font-size:12px; color:var(--text2); }
  .live-badge {
    display:inline-flex; align-items:center; gap:5px;
    font-size:10px; color:var(--green); margin-top:3px;
  }
  .live-dot { width:6px; height:6px; background:var(--green); border-radius:50%; animation:pulse 1.8s ease-in-out infinite; }
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.4;transform:scale(.8)} }

  /* notification status indicator */
  .notif-status {
    display:inline-flex; align-items:center; gap:5px;
    font-size:10px; padding:3px 9px; border-radius:20px;
    border:1px solid;
    margin-top:4px;
    cursor:pointer;
    transition:all .2s;
  }
  .notif-status.on  { color:var(--green); border-color:rgba(16,185,129,.4); background:rgba(16,185,129,.08); }
  .notif-status.off { color:var(--text3); border-color:var(--border); background:transparent; }

  /* quote strip */
  .quote-strip {
    background:linear-gradient(90deg,rgba(59,130,246,.08),rgba(139,92,246,.08));
    border:1px solid rgba(59,130,246,.15); border-radius:var(--r-sm);
    padding:10px 14px; font-size:12px; color:var(--text2); line-height:1.6;
  }
  .quote-strip span { color:var(--cyan); }

  /* â”€â”€ UPDATE BAR â”€â”€ */
  .update-bar {
    margin:0 16px 8px;
    background:rgba(16,185,129,.08);
    border:1px solid rgba(16,185,129,.2);
    border-radius:var(--r-sm);
    padding:10px 14px;
    display:flex; align-items:center; justify-content:space-between;
    position:relative; z-index:1;
    font-size:12px; color:var(--green);
    display:none;
  }
  .update-bar.visible { display:flex; }
  .update-bar button {
    font-size:11px; color:var(--green);
    background:rgba(16,185,129,.15); border:1px solid rgba(16,185,129,.3);
    border-radius:6px; padding:4px 10px; cursor:pointer;
    font-family:'Noto Sans JP',sans-serif;
  }

  /* â”€â”€ SECTION LABEL â”€â”€ */
  .section-label {
    padding:6px 20px 0;
    display:flex; justify-content:space-between; align-items:center;
    position:relative; z-index:1;
  }
  .section-title { font-size:11px; font-weight:700; letter-spacing:.14em; text-transform:uppercase; color:var(--text3); }
  .section-count {
    font-family:'Space Mono',monospace; font-size:10px; color:var(--blue);
    background:rgba(59,130,246,.1); padding:2px 8px; border-radius:20px;
  }

  /* â”€â”€ CARDS â”€â”€ */
  .news-list { padding:10px 16px 16px; display:flex; flex-direction:column; gap:10px; position:relative; z-index:1; }

  .news-card {
    background:var(--surface); border:1px solid var(--border);
    border-radius:var(--r); overflow:hidden; cursor:pointer;
    transition:transform .15s ease, box-shadow .15s ease;
    position:relative;
    animation:fadeUp .4s ease both;
  }
  .news-card:nth-child(1){animation-delay:.05s}
  .news-card:nth-child(2){animation-delay:.12s}
  .news-card:nth-child(3){animation-delay:.19s}
  .news-card:nth-child(4){animation-delay:.26s}
  .news-card:nth-child(5){animation-delay:.33s}
  @keyframes fadeUp { from{opacity:0;transform:translateY(18px)} to{opacity:1;transform:translateY(0)} }

  .news-card:active { transform:scale(.98); }

  .card-accent { position:absolute; left:0;top:0;bottom:0; width:4px; border-radius:4px 0 0 4px; }
  .card-new-badge {
    position:absolute; top:10px; right:12px;
    font-size:9px; font-weight:700; letter-spacing:.08em;
    background:var(--blue); color:#fff;
    padding:2px 7px; border-radius:10px;
    display:none;
  }
  .card-new-badge.show { display:block; animation:blink 1.5s ease-in-out 3; }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:.4} }

  .card-head { padding:14px 16px 10px 20px; display:flex; flex-direction:column; gap:8px; }
  .card-meta { display:flex; justify-content:space-between; align-items:center; }
  .card-badge {
    display:inline-flex; align-items:center; gap:5px;
    font-size:10px; font-weight:700; letter-spacing:.06em;
    padding:4px 10px; border-radius:20px;
  }
  .card-date { font-family:'Space Mono',monospace; font-size:10px; color:var(--text3); }
  .card-title { font-size:15px; font-weight:700; line-height:1.4; }
  .card-preview {
    font-size:12px; color:var(--text2); line-height:1.6;
    display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
  }
  .card-foot { padding:0 16px 12px 20px; display:flex; justify-content:space-between; align-items:center; }
  .tags { display:flex; gap:6px; flex-wrap:wrap; }
  .tag { font-size:10px; color:var(--text3); background:rgba(255,255,255,.04); padding:3px 8px; border-radius:6px; border:1px solid var(--border); }
  .tap-hint { font-size:10px; color:var(--text3); display:flex; align-items:center; gap:3px; }
  .chev { width:14px; height:14px; }

  /* â”€â”€ SCOREBOARD â”€â”€ */
  .scoreboard {
    margin:4px 16px 12px; background:var(--surface);
    border:1px solid var(--border); border-radius:var(--r);
    padding:16px; position:relative; z-index:1;
  }
  .score-hd { font-size:11px; font-weight:700; letter-spacing:.1em; text-transform:uppercase; color:var(--text3); margin-bottom:14px; }
  .score-item { margin-bottom:12px; }
  .score-item:last-child { margin-bottom:0; }
  .score-lbl { display:flex; justify-content:space-between; margin-bottom:5px; font-size:12px; color:var(--text2); }
  .score-val { font-family:'Space Mono',monospace; font-size:12px; font-weight:700; }
  .bar-bg { height:8px; background:rgba(255,255,255,.05); border-radius:4px; overflow:hidden; }
  .bar-fill { height:100%; border-radius:4px; width:0%; transition:width 1s cubic-bezier(.34,1.56,.64,1); }

  /* â”€â”€ BOTTOM NAV â”€â”€ */
  .bottom-nav {
    position:fixed; bottom:0; left:50%; transform:translateX(-50%);
    width:100%; max-width:430px;
    background:rgba(7,11,20,.92);
    backdrop-filter:blur(24px); -webkit-backdrop-filter:blur(24px);
    border-top:1px solid var(--border);
    display:flex; justify-content:space-around;
    padding:10px 0 20px; z-index:200;
  }
  .nav-item { display:flex; flex-direction:column; align-items:center; gap:3px; font-size:9px; color:var(--text3); padding:4px 12px; cursor:pointer; transition:color .2s; }
  .nav-item.active { color:var(--blue); }
  .nav-icon { font-size:20px; line-height:1; }
  .spacer { height:90px; }

  /* â”€â”€ MODAL â”€â”€ */
  .overlay {
    position:fixed; inset:0;
    background:rgba(0,0,0,.72);
    z-index:300; opacity:0; pointer-events:none;
    transition:opacity .25s ease;
    backdrop-filter:blur(5px); -webkit-backdrop-filter:blur(5px);
  }
  .overlay.open { opacity:1; pointer-events:all; }

  .sheet {
    position:absolute; bottom:0; left:50%; transform:translateX(-50%) translateY(100%);
    width:100%; max-width:430px;
    background:#0b1526; border-radius:26px 26px 0 0;
    border-top:1px solid var(--border);
    max-height:90vh; overflow-y:auto;
    transition:transform .35s cubic-bezier(.34,1.2,.64,1);
    -webkit-overflow-scrolling:touch;
  }
  .overlay.open .sheet { transform:translateX(-50%) translateY(0); }

  .handle { width:40px; height:4px; background:rgba(255,255,255,.14); border-radius:2px; margin:14px auto 0; }
  .modal-body-wrap { padding:20px 22px 44px; }

  .modal-badge-row { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
  .modal-title { font-size:22px; font-weight:900; line-height:1.3; margin-bottom:14px; }
  .divider { height:1px; background:var(--border); margin:16px 0; }
  .sec-head { font-size:10px; font-weight:700; letter-spacing:.15em; text-transform:uppercase; color:var(--text3); margin-bottom:10px; }

  .stat-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:14px 0; }
  .stat-box { background:rgba(255,255,255,.04); border:1px solid var(--border); border-radius:12px; padding:12px; text-align:center; }
  .stat-num { font-family:'Space Mono',monospace; font-size:22px; font-weight:700; display:block; margin-bottom:4px; }
  .stat-lbl { font-size:10px; color:var(--text3); letter-spacing:.07em; }

  .highlight-box {
    border-left:3px solid; border-radius:0 8px 8px 0;
    padding:12px 14px; font-size:13px; line-height:1.75;
    color:var(--text2); margin:14px 0;
    background:rgba(59,130,246,.06);
  }
  .modal-text { font-size:14px; line-height:1.85; color:var(--text2); }
  .modal-text p { margin-bottom:12px; }
  .modal-text strong { color:var(--text); font-weight:700; }

  .source-box {
    display:flex; align-items:center; gap:10px;
    background:rgba(255,255,255,.03); border:1px solid var(--border);
    border-radius:12px; padding:12px; margin-top:14px;
  }
  .src-info { flex:1; }
  .src-name { font-size:13px; font-weight:600; }
  .src-url { font-size:10px; color:var(--text3); margin-top:2px; }

  .close-btn {
    width:100%; margin-top:16px; padding:15px;
    background:rgba(59,130,246,.14); border:1px solid rgba(59,130,246,.3);
    border-radius:14px; color:var(--blue);
    font-family:'Noto Sans JP',sans-serif; font-size:14px; font-weight:700;
    cursor:pointer; transition:background .2s;
  }
  .close-btn:active { background:rgba(59,130,246,.25); }

  /* â”€â”€ SETTINGS PANEL â”€â”€ */
  .settings-overlay {
    position:fixed; inset:0;
    background:rgba(0,0,0,.72);
    z-index:400; opacity:0; pointer-events:none;
    transition:opacity .25s ease;
    backdrop-filter:blur(5px); -webkit-backdrop-filter:blur(5px);
  }
  .settings-overlay.open { opacity:1; pointer-events:all; }

  .settings-sheet {
    position:absolute; bottom:0; left:50%; transform:translateX(-50%) translateY(100%);
    width:100%; max-width:430px;
    background:#0b1526; border-radius:26px 26px 0 0;
    border-top:1px solid var(--border);
    transition:transform .35s cubic-bezier(.34,1.2,.64,1);
    padding-bottom:40px;
  }
  .settings-overlay.open .settings-sheet { transform:translateX(-50%) translateY(0); }

  .settings-title {
    font-size:18px; font-weight:900; padding:22px 22px 6px;
    border-bottom:1px solid var(--border); margin-bottom:4px;
    display:flex; justify-content:space-between; align-items:center;
  }

  .settings-section { padding:16px 22px 0; }
  .settings-section-label { font-size:10px; font-weight:700; letter-spacing:.15em; text-transform:uppercase; color:var(--text3); margin-bottom:12px; }

  .setting-row {
    display:flex; justify-content:space-between; align-items:center;
    padding:14px 0; border-bottom:1px solid rgba(255,255,255,.05);
  }
  .setting-row:last-child { border-bottom:none; }
  .setting-info { flex:1; margin-right:16px; }
  .setting-name { font-size:14px; font-weight:600; margin-bottom:3px; }
  .setting-desc { font-size:11px; color:var(--text3); line-height:1.5; }

  /* Toggle switch */
  .toggle { position:relative; width:50px; height:28px; flex-shrink:0; }
  .toggle input { opacity:0; width:0; height:0; position:absolute; }
  .toggle-track {
    position:absolute; inset:0;
    background:rgba(255,255,255,.1); border-radius:14px;
    cursor:pointer; transition:background .25s;
    border:1px solid var(--border);
  }
  .toggle input:checked + .toggle-track { background:var(--blue); border-color:var(--blue); }
  .toggle-thumb {
    position:absolute; top:4px; left:4px;
    width:20px; height:20px; background:#fff;
    border-radius:50%; transition:transform .25s cubic-bezier(.34,1.56,.64,1);
    box-shadow:0 2px 6px rgba(0,0,0,.4);
    pointer-events:none;
  }
  .toggle input:checked ~ .toggle-thumb { transform:translateX(22px); }

  /* Time picker style */
  .time-select {
    background:rgba(255,255,255,.07); border:1px solid var(--border);
    color:var(--text); font-family:'Space Mono',monospace; font-size:14px;
    padding:8px 12px; border-radius:8px; outline:none; cursor:pointer;
    -webkit-appearance:none; appearance:none;
    min-width:90px; text-align:center;
  }

  .settings-save-btn {
    margin:20px 22px 0;
    width:calc(100% - 44px); padding:15px;
    background:linear-gradient(135deg,var(--blue),var(--violet));
    border:none; border-radius:14px; color:#fff;
    font-family:'Noto Sans JP',sans-serif; font-size:15px; font-weight:700;
    cursor:pointer; box-shadow:0 4px 20px rgba(59,130,246,.3);
    transition:opacity .2s;
  }
  .settings-save-btn:active { opacity:.8; }

  /* permission request card */
  .permission-card {
    margin:0 16px 10px;
    background:rgba(59,130,246,.08); border:1px solid rgba(59,130,246,.25);
    border-radius:var(--r); padding:16px;
    position:relative; z-index:1;
    display:none;
  }
  .permission-card.visible { display:block; }
  .perm-title { font-size:14px; font-weight:700; margin-bottom:6px; }
  .perm-desc { font-size:12px; color:var(--text2); line-height:1.6; margin-bottom:12px; }
  .perm-btn {
    padding:10px 20px; background:var(--blue); border:none; border-radius:10px;
    color:#fff; font-family:'Noto Sans JP',sans-serif; font-size:13px; font-weight:700;
    cursor:pointer; width:100%;
  }
  .perm-deny { font-size:11px; color:var(--text3); text-align:center; margin-top:8px; cursor:pointer; }

  /* toast */
  .toast {
    position:fixed; bottom:90px; left:50%; transform:translateX(-50%) translateY(20px);
    background:rgba(16,185,129,.15); border:1px solid rgba(16,185,129,.4);
    color:var(--green); border-radius:30px; padding:10px 20px;
    font-size:13px; font-weight:600; white-space:nowrap;
    opacity:0; transition:all .3s ease; z-index:500; pointer-events:none;
  }
  .toast.show { opacity:1; transform:translateX(-50%) translateY(0); }

  /* Install banner */
  .install-banner {
    margin:0 16px 10px;
    background:rgba(139,92,246,.08); border:1px solid rgba(139,92,246,.25);
    border-radius:var(--r-sm); padding:12px 14px;
    display:flex; align-items:center; gap:10px;
    position:relative; z-index:1; display:none;
  }
  .install-banner.visible { display:flex; }
  .install-txt { flex:1; font-size:12px; color:var(--text2); line-height:1.5; }
  .install-btn {
    font-size:12px; font-weight:700; color:var(--violet);
    background:rgba(139,92,246,.15); border:1px solid rgba(139,92,246,.3);
    border-radius:8px; padding:7px 14px; cursor:pointer; white-space:nowrap;
    font-family:'Noto Sans JP',sans-serif;
  }
</style>
</head>
<body>

<!-- Status Bar -->
<div class="status-bar">
  <span class="status-time" id="status-time">--:--</span>
  <div class="status-icons">
    <span id="offline-icon" style="display:none;color:#ef4444;font-size:11px;">ğŸ“µã‚ªãƒ•ãƒ©ã‚¤ãƒ³</span>
    <span>ğŸ“¶</span>
    <span>ğŸ”‹</span>
  </div>
</div>

<!-- App Header -->
<div class="app-header">
  <div class="header-top">
    <div class="logo">
      <div class="logo-icon">ğŸ¤–</div>
      <div>
        <div class="logo-name">AI Scout</div>
        <div class="logo-sub">Latest Intelligence</div>
      </div>
    </div>
    <div class="header-right">
      <div class="date-txt" id="header-date">2026.02.27</div>
      <div class="live-badge"><div class="live-dot"></div>LIVE</div>
      <div class="notif-status off" id="notif-status-badge" onclick="openSettings()">
        <span id="notif-status-icon">ğŸ”•</span>
        <span id="notif-status-txt">é€šçŸ¥OFF</span>
      </div>
    </div>
  </div>
  <div class="quote-strip">
    ğŸ’¬ <span>ä»Šæ—¥ã®æ ¼è¨€ï¼š</span>ã€ŒAIã¯ç«¶äº‰ã§ã¯ãªãã€ã‚¤ãƒ³ãƒ•ãƒ©ã«ãªã£ãŸã€‚å•é¡Œã¯ã„ã¤æ°—ã¥ãã‹ã ã€‚ã€
  </div>
</div>

<!-- Install Banner -->
<div class="install-banner" id="install-banner">
  <span style="font-size:22px;">ğŸ“²</span>
  <div class="install-txt">ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã‚¢ãƒ—ãƒªã¨ã—ã¦ä½¿ãˆã¾ã™</div>
  <button class="install-btn" id="install-btn">è¿½åŠ </button>
</div>

<!-- Notification Permission Request -->
<div class="permission-card" id="permission-card">
  <div class="perm-title">ğŸ”” æ–°ç€é€šçŸ¥ã‚’å—ã‘å–ã‚Šã¾ã™ã‹ï¼Ÿ</div>
  <div class="perm-desc">æ¯æ—¥AIãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã€ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã§ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚è¨­å®šã‹ã‚‰ã„ã¤ã§ã‚‚å¤‰æ›´ã§ãã¾ã™ã€‚</div>
  <button class="perm-btn" onclick="requestNotificationPermission()">é€šçŸ¥ã‚’è¨±å¯ã™ã‚‹</button>
  <div class="perm-deny" onclick="dismissPermissionCard()">ä»Šã¯ã—ãªã„</div>
</div>

<!-- Update Available Bar -->
<div class="update-bar" id="update-bar">
  <span>ğŸ†• æ–°ã—ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™</span>
  <button onclick="reloadNews()">æ›´æ–°</button>
</div>

<!-- Section Header -->
<div class="section-label">
  <span class="section-title">ğŸ“¡ Top Stories</span>
  <span class="section-count" id="news-count">5 ARTICLES</span>
</div>

<!-- News Cards -->
<div class="news-list" id="news-list">
  <div class="news-card" onclick="openModal('gemini')">
    <div class="card-accent" style="background:#06b6d4"></div>
    <div class="card-new-badge" id="badge-gemini">NEW</div>
    <div class="card-head">
      <div class="card-meta">
        <div class="card-badge" style="background:rgba(6,182,212,.12);color:#06b6d4">ğŸŒ GOOGLE</div>
        <span class="card-date">2æœˆ19æ—¥</span>
      </div>
      <div class="card-title">Gemini 3.1 Proã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯é¦–ä½å¥ªé‚„</div>
      <div class="card-preview">16é …ç›®ä¸­13é …ç›®ã§é¦–ä½ã€‚ARC-AGI-2ã§77.1%ã‚’é”æˆã—Claudeãƒ»GPT-5ã‚’å¼•ãé›¢ã—ãŸã€‚</div>
    </div>
    <div class="card-foot">
      <div class="tags"><span class="tag">#ãƒ¢ãƒ‡ãƒ«ç«¶äº‰</span><span class="tag">#ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</span></div>
      <div class="tap-hint">è©³ç´°<svg class="chev" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 18l6-6-6-6"/></svg></div>
    </div>
  </div>

  <div class="news-card" onclick="openModal('claude')">
    <div class="card-accent" style="background:#10b981"></div>
    <div class="card-new-badge" id="badge-claude">NEW</div>
    <div class="card-head">
      <div class="card-meta">
        <div class="card-badge" style="background:rgba(16,185,129,.12);color:#10b981">ğŸŸ  ANTHROPIC</div>
        <span class="card-date">2æœˆä¸­æ—¬</span>
      </div>
      <div class="card-title">Claude Sonnet 4.6ã€ä¸­ä½ãƒ¢ãƒ‡ãƒ«ãŒä¸Šä½è¶…ãˆ</div>
      <div class="card-preview">SWE-Bench Verified 80.8%ã§é¦–ä½ã€‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°èƒ½åŠ›ã§Opusã‚’ä¸Šå›ã‚Šæœˆ$20ã®Proã§ã‚‚åˆ©ç”¨å¯ã€‚</div>
    </div>
    <div class="card-foot">
      <div class="tags"><span class="tag">#Claude</span><span class="tag">#ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°AI</span></div>
      <div class="tap-hint">è©³ç´°<svg class="chev" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 18l6-6-6-6"/></svg></div>
    </div>
  </div>

  <div class="news-card" onclick="openModal('meta')">
    <div class="card-accent" style="background:#8b5cf6"></div>
    <div class="card-new-badge" id="badge-meta">NEW</div>
    <div class="card-head">
      <div class="card-meta">
        <div class="card-badge" style="background:rgba(139,92,246,.12);color:#8b5cf6">ğŸ“˜ META</div>
        <span class="card-date">2æœˆ26æ—¥</span>
      </div>
      <div class="card-title">Meta Ã— Pradaã®ã‚³ãƒ©ãƒœ AIã‚¹ãƒãƒ¼ãƒˆã‚°ãƒ©ã‚¹ï¼Ÿ</div>
      <div class="card-preview">ã‚¶ãƒƒã‚«ãƒ¼ãƒãƒ¼ã‚°ãŒãƒŸãƒ©ãƒFWã®Pradaã‚·ãƒ§ãƒ¼ã«ç™»å ´ã€‚é«˜ç´šãƒ–ãƒ©ãƒ³ãƒ‰ Ã— AIã‚°ãƒ©ã‚¹ã®ã‚³ãƒ©ãƒœã‚’å¼·ãç¤ºå”†ã€‚</div>
    </div>
    <div class="card-foot">
      <div class="tags"><span class="tag">#ã‚¦ã‚§ã‚¢ãƒ©ãƒ–ãƒ«</span><span class="tag">#Meta AI</span></div>
      <div class="tap-hint">è©³ç´°<svg class="chev" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 18l6-6-6-6"/></svg></div>
    </div>
  </div>

  <div class="news-card" onclick="openModal('nuclear')">
    <div class="card-accent" style="background:#ef4444"></div>
    <div class="card-new-badge" id="badge-nuclear">NEW</div>
    <div class="card-head">
      <div class="card-meta">
        <div class="card-badge" style="background:rgba(239,68,68,.12);color:#ef4444">âš ï¸ AIå®‰å…¨ç ”ç©¶</div>
        <span class="card-date">2æœˆ22æ—¥</span>
      </div>
      <div class="card-title">AIãŒæ ¸ã‚·ãƒŸãƒ¥ã§ã€Œå…ˆåˆ¶æ”»æ’ƒã€ã‚’é¸æŠ</div>
      <div class="card-preview">GPTãƒ»Claudeãƒ»GeminiãŒ300å›è¶…ã®æ ¸å±æ©Ÿã‚·ãƒŸãƒ¥ã‚’å®Ÿæ–½ã€‚GPTãŒçªç„¶ã®æ ¸ä½¿ç”¨ã‚’ã€Œåˆç†çš„ã€ã¨åˆ¤æ–­ã€‚</div>
    </div>
    <div class="card-foot">
      <div class="tags"><span class="tag">#AIãƒªã‚¹ã‚¯</span><span class="tag">#ã‚¬ãƒãƒŠãƒ³ã‚¹</span></div>
      <div class="tap-hint">è©³ç´°<svg class="chev" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 18l6-6-6-6"/></svg></div>
    </div>
  </div>

  <div class="news-card" onclick="openModal('japan')">
    <div class="card-accent" style="background:#f59e0b"></div>
    <div class="card-new-badge" id="badge-japan">NEW</div>
    <div class="card-head">
      <div class="card-meta">
        <div class="card-badge" style="background:rgba(245,158,11,.12);color:#f59e0b">ğŸ‡¯ğŸ‡µ æ—¥æœ¬</div>
        <span class="card-date">2æœˆ24æ—¥</span>
      </div>
      <div class="card-title">æ—¥æœ¬ã€åˆã®AIåŸºæœ¬è¨ˆç”»ã‚’ç­–å®šã¸</div>
      <div class="card-preview">æ”¿åºœAIã€ŒGennaiã€ã‚’5æœˆã‹ã‚‰10ä¸‡äººè¶…ã®å…¬å‹™å“¡ã¸å±•é–‹ã€‚é«˜æ ¡ç”Ÿã®ç´„åŠæ•°ãŒã™ã§ã«AIæ´»ç”¨ã€‚</div>
    </div>
    <div class="card-foot">
      <div class="tags"><span class="tag">#æ—¥æœ¬AIæ”¿ç­–</span><span class="tag">#DXæ¨é€²</span></div>
      <div class="tap-hint">è©³ç´°<svg class="chev" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M9 18l6-6-6-6"/></svg></div>
    </div>
  </div>
</div>

<!-- Scoreboard -->
<div class="section-label">
  <span class="section-title">ğŸ“Š Model Scores</span>
  <span class="section-count">FEB 2026</span>
</div>
<div class="scoreboard">
  <div class="score-hd">Intelligence Score Ranking</div>
  <div class="score-item">
    <div class="score-lbl"><span>ğŸŒ Gemini 3.1 Pro</span><span class="score-val" style="color:#06b6d4">57 pt</span></div>
    <div class="bar-bg"><div class="bar-fill" style="background:linear-gradient(90deg,#0891b2,#06b6d4)" data-w="85%"></div></div>
  </div>
  <div class="score-item">
    <div class="score-lbl"><span>ğŸŸ  Claude Opus 4.6</span><span class="score-val" style="color:#10b981">53 pt</span></div>
    <div class="bar-bg"><div class="bar-fill" style="background:linear-gradient(90deg,#059669,#10b981)" data-w="79%"></div></div>
  </div>
  <div class="score-item">
    <div class="score-lbl"><span>â¬› GPT-5.2</span><span class="score-val" style="color:#8b5cf6">ã€œ50 pt</span></div>
    <div class="bar-bg"><div class="bar-fill" style="background:linear-gradient(90deg,#6d28d9,#8b5cf6)" data-w="73%"></div></div>
  </div>
</div>

<div class="spacer"></div>

<!-- Bottom Nav -->
<div class="bottom-nav">
  <div class="nav-item active" onclick="scrollToTop()">
    <div class="nav-icon">ğŸ“°</div><span>ãƒ‹ãƒ¥ãƒ¼ã‚¹</span>
  </div>
  <div class="nav-item" onclick="scrollToScore()">
    <div class="nav-icon">ğŸ“Š</div><span>ã‚¹ã‚³ã‚¢</span>
  </div>
  <div class="nav-item" id="notif-nav-btn" onclick="toggleNotificationFromNav()">
    <div class="nav-icon" id="notif-nav-icon">ğŸ””</div><span id="notif-nav-txt">é€šçŸ¥</span>
  </div>
  <div class="nav-item" onclick="openSettings()">
    <div class="nav-icon">âš™ï¸</div><span>è¨­å®š</span>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- ===================== NEWS DETAIL MODAL ===================== -->
<div class="overlay" id="modal-overlay" onclick="handleOverlayClick(event)">
  <div class="sheet" id="modal-sheet">
    <div class="handle"></div>
    <div class="modal-body-wrap" id="modal-inner"></div>
  </div>
</div>

<!-- ===================== SETTINGS PANEL ===================== -->
<div class="settings-overlay" id="settings-overlay" onclick="handleSettingsOverlayClick(event)">
  <div class="settings-sheet" id="settings-sheet">
    <div class="handle"></div>
    <div class="settings-title">
      âš™ï¸ è¨­å®š
      <span style="font-size:13px;color:var(--text3);cursor:pointer;font-weight:400" onclick="closeSettings()">é–‰ã˜ã‚‹</span>
    </div>

    <!-- é€šçŸ¥è¨­å®š -->
    <div class="settings-section">
      <div class="settings-section-label">ğŸ”” é€šçŸ¥</div>

      <div class="setting-row">
        <div class="setting-info">
          <div class="setting-name">ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥</div>
          <div class="setting-desc">æ–°ç€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã§ãŠçŸ¥ã‚‰ã›</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="toggle-notif" onchange="handleNotifToggle(this)">
          <div class="toggle-track"></div>
          <div class="toggle-thumb"></div>
        </label>
      </div>

      <div class="setting-row" id="row-time" style="opacity:.4;pointer-events:none">
        <div class="setting-info">
          <div class="setting-name">é€šçŸ¥æ™‚åˆ»</div>
          <div class="setting-desc">æ¯æ—¥ã“ã®æ™‚åˆ»ã«æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ãŠå±Šã‘</div>
        </div>
        <select class="time-select" id="notif-time">
          <option value="07:00">07:00</option>
          <option value="08:00" selected>08:00</option>
          <option value="09:00">09:00</option>
          <option value="12:00">12:00</option>
          <option value="18:00">18:00</option>
          <option value="21:00">21:00</option>
        </select>
      </div>

      <div class="setting-row" id="row-sound" style="opacity:.4;pointer-events:none">
        <div class="setting-info">
          <div class="setting-name">é€šçŸ¥ã‚µã‚¦ãƒ³ãƒ‰</div>
          <div class="setting-desc">é€šçŸ¥æ™‚ã«ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é³´ã‚‰ã™</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="toggle-sound" checked>
          <div class="toggle-track"></div>
          <div class="toggle-thumb"></div>
        </label>
      </div>
    </div>

    <!-- è¡¨ç¤ºè¨­å®š -->
    <div class="settings-section">
      <div class="settings-section-label" style="margin-top:18px">ğŸ¨ è¡¨ç¤º</div>

      <div class="setting-row">
        <div class="setting-info">
          <div class="setting-name">ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</div>
          <div class="setting-desc">æ—¥æœ¬ã®AIãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’å„ªå…ˆè¡¨ç¤ºã™ã‚‹</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="toggle-japan" checked>
          <div class="toggle-track"></div>
          <div class="toggle-thumb"></div>
        </label>
      </div>

      <div class="setting-row">
        <div class="setting-info">
          <div class="setting-name">ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰è¡¨ç¤º</div>
          <div class="setting-desc">ãƒ¢ãƒ‡ãƒ«ã‚¹ã‚³ã‚¢ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¡¨ç¤ºã™ã‚‹</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="toggle-score" checked onchange="toggleScoreboard(this)">
          <div class="toggle-track"></div>
          <div class="toggle-thumb"></div>
        </label>
      </div>
    </div>

    <!-- ãƒ‡ãƒ¼ã‚¿ -->
    <div class="settings-section">
      <div class="settings-section-label" style="margin-top:18px">ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿</div>
      <div class="setting-row">
        <div class="setting-info">
          <div class="setting-name">æœ€çµ‚æ›´æ–°</div>
          <div class="setting-desc" id="last-updated-txt">2026-02-27 08:00</div>
        </div>
        <button style="font-size:12px;color:var(--blue);background:rgba(59,130,246,.12);border:1px solid rgba(59,130,246,.3);border-radius:8px;padding:7px 14px;cursor:pointer;font-family:'Noto Sans JP',sans-serif" onclick="manualRefresh()">ä»Šã™ãæ›´æ–°</button>
      </div>
      <div class="setting-row">
        <div class="setting-info">
          <div class="setting-name">ãƒãƒ¼ã‚¸ãƒ§ãƒ³</div>
          <div class="setting-desc">AI Scout v1.0.0 â€” PWA</div>
        </div>
        <span style="font-size:11px;color:var(--text3)">æœ€æ–°</span>
      </div>
    </div>

    <button class="settings-save-btn" onclick="saveSettings()">âœ“ è¨­å®šã‚’ä¿å­˜</button>
  </div>
</div>

<!-- ===================== SCRIPTS ===================== -->
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const state = {
  notifEnabled: false,
  notifTime: '08:00',
  notifSound: true,
  showJapan: true,
  showScore: true,
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', () => {
  updateClock();
  setInterval(updateClock, 10000);
  updateHeaderDate();
  animateBars();
  loadSettings();
  registerSW();
  checkOnlineStatus();
  initInstallPrompt();

  // åˆå›è¨ªå•ãªã‚‰é€šçŸ¥ã‚«ãƒ¼ãƒ‰ã‚’è¡¨ç¤º
  if (!localStorage.getItem('notif-asked') && 'Notification' in window) {
    setTimeout(() => {
      document.getElementById('permission-card').classList.add('visible');
    }, 2000);
  }

  // ç–‘ä¼¼çš„ãªã€Œæ›´æ–°ãƒãƒ¼ã€ãƒ‡ãƒ¢ï¼ˆå®Ÿéš›ã¯APIã‹ã‚‰æ–°ç€ãƒã‚§ãƒƒã‚¯å¾Œã«å‡ºã™ï¼‰
  setTimeout(() => simulateUpdateCheck(), 8000);
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CLOCK & DATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateClock() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2,'0');
  const m = String(now.getMinutes()).padStart(2,'0');
  document.getElementById('status-time').textContent = h + ':' + m;
}

function updateHeaderDate() {
  const now = new Date();
  const y = now.getFullYear();
  const m = String(now.getMonth()+1).padStart(2,'0');
  const d = String(now.getDate()).padStart(2,'0');
  document.getElementById('header-date').textContent = `${y}.${m}.${d}`;
  document.getElementById('last-updated-txt').textContent = `${y}-${m}-${d} 08:00`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCORE BAR ANIMATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function animateBars() {
  setTimeout(() => {
    document.querySelectorAll('.bar-fill').forEach(b => b.style.width = b.dataset.w);
  }, 400);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SERVICE WORKER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function registerSW() {
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js').then(reg => {
      console.log('[SW] registered', reg.scope);
      // æ›´æ–°ãƒã‚§ãƒƒã‚¯
      reg.addEventListener('updatefound', () => {
        showToast('ğŸ”„ ã‚¢ãƒ—ãƒªã‚’æ›´æ–°ã—ã¦ã„ã¾ã™...');
      });
    }).catch(err => console.warn('[SW] failed', err));
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ONLINE / OFFLINE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function checkOnlineStatus() {
  function update() {
    const icon = document.getElementById('offline-icon');
    icon.style.display = navigator.onLine ? 'none' : 'inline';
  }
  window.addEventListener('online', () => { update(); showToast('ğŸ“¶ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«æˆ»ã‚Šã¾ã—ãŸ'); });
  window.addEventListener('offline', () => { update(); showToast('ğŸ“µ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ â€” ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¡¨ç¤ºä¸­'); });
  update();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INSTALL PROMPT (PWAãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ )
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let deferredPrompt = null;
function initInstallPrompt() {
  window.addEventListener('beforeinstallprompt', e => {
    e.preventDefault();
    deferredPrompt = e;
    document.getElementById('install-banner').classList.add('visible');
  });
  document.getElementById('install-btn').addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === 'accepted') {
      showToast('ğŸ“² ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¾ã—ãŸï¼');
      document.getElementById('install-banner').classList.remove('visible');
    }
    deferredPrompt = null;
  });
  window.addEventListener('appinstalled', () => {
    document.getElementById('install-banner').classList.remove('visible');
    showToast('âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ï¼');
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NOTIFICATION PERMISSION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function requestNotificationPermission() {
  localStorage.setItem('notif-asked', '1');
  document.getElementById('permission-card').classList.remove('visible');

  if (!('Notification' in window)) {
    showToast('âš ï¸ ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯é€šçŸ¥æœªå¯¾å¿œã§ã™');
    return;
  }
  const perm = await Notification.requestPermission();
  if (perm === 'granted') {
    state.notifEnabled = true;
    saveSettings();
    updateNotifUI(true);
    showToast('ğŸ”” é€šçŸ¥ã‚’è¨±å¯ã—ã¾ã—ãŸï¼');
    scheduleLocalNotification(); // ãƒ‡ãƒ¢ç”¨ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥
  } else {
    showToast('ğŸ”• é€šçŸ¥ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™');
  }
}

function dismissPermissionCard() {
  localStorage.setItem('notif-asked', '1');
  document.getElementById('permission-card').classList.remove('visible');
}

function scheduleLocalNotification() {
  // å®Ÿéš›ã®Pushé€šçŸ¥ã¯ã‚µãƒ¼ãƒãƒ¼å´ã‹ã‚‰é€ä¿¡ã™ã‚‹ãŒã€
  // ãƒ‡ãƒ¢ã¨ã—ã¦10ç§’å¾Œã«Service WorkerçµŒç”±ã§ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥ã‚’è¡¨ç¤º
  if ('serviceWorker' in navigator && Notification.permission === 'granted') {
    setTimeout(() => {
      navigator.serviceWorker.ready.then(reg => {
        reg.showNotification('ğŸ¤– AI Scout', {
          body: 'æ¯æœ8æ™‚ã«æœ€æ–°AIãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ãŠå±Šã‘ã—ã¾ã™ï¼',
          tag: 'welcome',
          vibrate: [100, 50, 100],
        });
      });
    }, 10000);
  }
}

function updateNotifUI(enabled) {
  const badge = document.getElementById('notif-status-badge');
  const icon = document.getElementById('notif-status-icon');
  const txt = document.getElementById('notif-status-txt');
  const navIcon = document.getElementById('notif-nav-icon');
  const navTxt = document.getElementById('notif-nav-txt');
  const rowTime = document.getElementById('row-time');
  const rowSound = document.getElementById('row-sound');

  if (enabled) {
    badge.className = 'notif-status on';
    icon.textContent = 'ğŸ””';
    txt.textContent = 'é€šçŸ¥ON';
    navIcon.textContent = 'ğŸ””';
    navTxt.textContent = 'é€šçŸ¥ON';
    rowTime.style.opacity = '1';
    rowTime.style.pointerEvents = 'auto';
    rowSound.style.opacity = '1';
    rowSound.style.pointerEvents = 'auto';
    document.getElementById('toggle-notif').checked = true;
  } else {
    badge.className = 'notif-status off';
    icon.textContent = 'ğŸ”•';
    txt.textContent = 'é€šçŸ¥OFF';
    navIcon.textContent = 'ğŸ”•';
    navTxt.textContent = 'é€šçŸ¥';
    rowTime.style.opacity = '0.4';
    rowTime.style.pointerEvents = 'none';
    rowSound.style.opacity = '0.4';
    rowSound.style.pointerEvents = 'none';
    document.getElementById('toggle-notif').checked = false;
  }
}

async function handleNotifToggle(el) {
  if (el.checked) {
    if (Notification.permission === 'granted') {
      state.notifEnabled = true;
      updateNotifUI(true);
      showToast('ğŸ”” é€šçŸ¥ã‚’ONã«ã—ã¾ã—ãŸ');
    } else if (Notification.permission === 'denied') {
      el.checked = false;
      showToast('âš ï¸ ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‹ã‚‰é€šçŸ¥ã‚’è¨±å¯ã—ã¦ãã ã•ã„');
    } else {
      await requestNotificationPermission();
    }
  } else {
    state.notifEnabled = false;
    updateNotifUI(false);
    showToast('ğŸ”• é€šçŸ¥ã‚’OFFã«ã—ã¾ã—ãŸ');
  }
}

async function toggleNotificationFromNav() {
  if (state.notifEnabled) {
    state.notifEnabled = false;
    updateNotifUI(false);
    saveSettings();
    showToast('ğŸ”• é€šçŸ¥ã‚’OFFã«ã—ã¾ã—ãŸ');
  } else {
    if (Notification.permission === 'granted') {
      state.notifEnabled = true;
      updateNotifUI(true);
      saveSettings();
      showToast('ğŸ”” é€šçŸ¥ã‚’ONã«ã—ã¾ã—ãŸ');
    } else {
      openSettings();
    }
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SETTINGS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openSettings() {
  document.getElementById('settings-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';
  // ç¾åœ¨ã®è¨­å®šã‚’åæ˜ 
  document.getElementById('toggle-notif').checked = state.notifEnabled;
  document.getElementById('notif-time').value = state.notifTime;
  document.getElementById('toggle-sound').checked = state.notifSound;
  document.getElementById('toggle-japan').checked = state.showJapan;
  document.getElementById('toggle-score').checked = state.showScore;
}

function closeSettings() {
  document.getElementById('settings-overlay').classList.remove('open');
  document.body.style.overflow = '';
}

function handleSettingsOverlayClick(e) {
  if (e.target === document.getElementById('settings-overlay')) closeSettings();
}

function saveSettings() {
  state.notifEnabled = document.getElementById('toggle-notif')?.checked ?? state.notifEnabled;
  state.notifTime = document.getElementById('notif-time')?.value ?? state.notifTime;
  state.notifSound = document.getElementById('toggle-sound')?.checked ?? state.notifSound;
  state.showJapan = document.getElementById('toggle-japan')?.checked ?? state.showJapan;
  state.showScore = document.getElementById('toggle-score')?.checked ?? state.showScore;

  localStorage.setItem('ai-scout-settings', JSON.stringify(state));
  updateNotifUI(state.notifEnabled);
  closeSettings();
  showToast('âœ… è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ');
}

function loadSettings() {
  const saved = localStorage.getItem('ai-scout-settings');
  if (saved) {
    Object.assign(state, JSON.parse(saved));
    updateNotifUI(state.notifEnabled);
    // ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰è¡¨ç¤ºåæ˜ 
    const sb = document.querySelector('.scoreboard');
    if (sb) sb.style.display = state.showScore ? 'block' : 'none';
  }
}

function toggleScoreboard(el) {
  const sb = document.querySelector('.scoreboard');
  if (sb) sb.style.display = el.checked ? 'block' : 'none';
}

function manualRefresh() {
  showToast('ğŸ”„ æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ç¢ºèªä¸­...');
  setTimeout(() => showToast('âœ… æœ€æ–°ã®çŠ¶æ…‹ã§ã™'), 1500);
  closeSettings();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UPDATE BAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function simulateUpdateCheck() {
  // å®Ÿéš›ã¯APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ä¿å­˜æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚’æ¯”è¼ƒã—ã¦åˆ¤æ–­ã™ã‚‹
  // ã“ã“ã¯ãƒ‡ãƒ¢ã¨ã—ã¦è¡¨ç¤ºã®ã¿
  // document.getElementById('update-bar').classList.add('visible');
}

function reloadNews() {
  document.getElementById('update-bar').classList.remove('visible');
  showToast('âœ… ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
  // å®Ÿéš›ã¯ã“ã“ã§ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TOAST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let toastTimer = null;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  if (toastTimer) clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 2800);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function scrollToTop() { window.scrollTo({ top:0, behavior:'smooth' }); }
function scrollToScore() { document.querySelector('.scoreboard')?.scrollIntoView({ behavior:'smooth', block:'start' }); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NEWS DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const NEWS = {
  gemini: {
    color:'#06b6d4', badge:'ğŸŒ GOOGLE', date:'2026å¹´2æœˆ19æ—¥',
    title:'Gemini 3.1 Proã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯é¦–ä½å¥ªé‚„',
    stats:[
      {num:'77.1%',lbl:'ARC-AGI-2ã‚¹ã‚³ã‚¢'},
      {num:'13/16',lbl:'ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯é¦–ä½é …ç›®'},
      {num:'57pt',lbl:'Intelligence Score'},
      {num:'+18%',lbl:'å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”'},
    ],
    highlight:'ã€ŒGemini 3.1 Proã¯Claudeãƒ»GPT-5ã‚’ä¸Šå›ã‚Šã€2026å¹´åˆã®ç·åˆãƒˆãƒƒãƒ—ãƒ¢ãƒ‡ãƒ«ã¨ãªã£ãŸã€‚ã€â€” Artificial Analysis',
    body:`<p>GoogleãŒ<strong>Gemini 3.1 Pro</strong>ã‚’æ­£å¼ãƒªãƒªãƒ¼ã‚¹ã€‚16é …ç›®ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ä¸­13é …ç›®ã§é¦–ä½ã‚’ç²å¾—ã—ã€2025å¹´æœ«ã‹ã‚‰ãƒˆãƒƒãƒ—ã‚’ç¶­æŒã—ã¦ããŸOpenAIãƒ»Anthropicã‚’å¼•ãé›¢ã—ãŸã€‚</p><p>ç‰¹ã«ARC-AGI-2ï¼ˆæ±ç”¨çŸ¥èƒ½ãƒ†ã‚¹ãƒˆï¼‰ã§ã¯<strong>77.1%</strong>ã‚’è¨˜éŒ²ã€‚Claude Opus 4.6ã®53ptã‚’å¤§ããä¸Šå›ã‚Šã€æ¥­ç•Œæœ€é«˜æ°´æº–ã‚’ç¤ºã—ãŸã€‚</p><p>åŒæ™‚ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ<strong>Gemini 3.1 Flash</strong>ï¼ˆè»½é‡ç‰ˆï¼‰ã¯ãƒ¢ãƒã‚¤ãƒ«ãƒ»çµ„ã¿è¾¼ã¿å‘ã‘ã«æœ€é©åŒ–ã•ã‚Œã¦ãŠã‚Šã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€Ÿåº¦ãŒå¾“æ¥æ¯”<strong>2.3å€</strong>ã«å‘ä¸Šã—ã¦ã„ã‚‹ã€‚</p>`,
    source:'Cybernews / Artificial Analysis', sourceUrl:'cybernews.com',
    tags:['#ãƒ¢ãƒ‡ãƒ«ç«¶äº‰','#ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯','#Gemini','#Google'],
  },
  claude: {
    color:'#10b981', badge:'ğŸŸ  ANTHROPIC', date:'2026å¹´2æœˆä¸­æ—¬',
    title:'Claude Sonnet 4.6ã€ä¸­ä½ãƒ¢ãƒ‡ãƒ«ãŒä¸Šä½è¶…ãˆ',
    stats:[
      {num:'80.8%',lbl:'SWE-Bench Verified'},
      {num:'+32%',lbl:'ãƒ¢ãƒã‚¤ãƒ«DLå¢—åŠ '},
      {num:'$20/æœˆ',lbl:'Proãƒ—ãƒ©ãƒ³ä¾¡æ ¼'},
      {num:'1ä½',lbl:'ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ©ãƒ³ã‚­ãƒ³ã‚°'},
    ],
    highlight:'ã€Œä¸­ä½ãƒ¢ãƒ‡ãƒ«ã®SonnetãŒä¸Šä½ã®Opusã‚’è¶…ãˆãŸâ€”â€”AIãƒ¢ãƒ‡ãƒ«é–‹ç™ºã®å¸¸è­˜ã‚’è¦†ã™å‡ºæ¥äº‹ã€‚ã€',
    body:`<p><strong>Claude Sonnet 4.6</strong>ã¯Anthropicã®ãƒ¢ãƒ‡ãƒ«ãƒ©ã‚¤ãƒ³ãƒŠãƒƒãƒ—ä¸­é–“ã«ä½ç½®ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚ŠãªãŒã‚‰ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã€ŒSWE-Bench Verifiedã€ã§<strong>80.8%</strong>ã‚’é”æˆã—æ¥­ç•Œé¦–ä½ã‚’è¨˜éŒ²ã—ãŸã€‚</p><p>ã“ã‚Œã¯ä¸Šä½ãƒ¢ãƒ‡ãƒ«ã®Claude Opus 4.6ã‚’ç‰¹å®šåˆ†é‡ã§ä¸Šå›ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã€ãƒ¢ãƒ‡ãƒ«ã®ã‚µã‚¤ã‚ºï¼æ€§èƒ½ã¨ã„ã†å¾“æ¥ã®å¸¸è­˜ã«ç–‘å•ã‚’æŠ•ã’ã‹ã‘ã‚‹çµæœã¨ãªã£ãŸã€‚</p><p>ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ•°ã¯å‰æœˆæ¯”<strong>+32%</strong>ã€‚æœˆé¡<strong>$20ã®Proãƒ—ãƒ©ãƒ³</strong>ã§ã‚‚åˆ©ç”¨å¯èƒ½ãªã‚³ã‚¹ãƒˆåŠ¹ç‡ã®é«˜ã•ã‚‚æ³¨ç›®ã•ã‚Œã¦ã„ã‚‹ã€‚</p>`,
    source:'Design for Online / Anthropic', sourceUrl:'designforonline.com',
    tags:['#Claude','#ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°AI','#Anthropic','#SWE-Bench'],
  },
  meta: {
    color:'#8b5cf6', badge:'ğŸ“˜ META', date:'2026å¹´2æœˆ26æ—¥',
    title:'Meta Ã— Prada AIã‚¹ãƒãƒ¼ãƒˆã‚°ãƒ©ã‚¹ã€ãƒŸãƒ©ãƒã§ç¤ºå”†',
    stats:[
      {num:'3ä»£ç›®',lbl:'Ray-Ban Metaã‚·ãƒªãƒ¼ã‚º'},
      {num:'2026',lbl:'ãƒªãƒªãƒ¼ã‚¹äºˆå®šå¹´'},
      {num:'ğŸ‡®ğŸ‡¹',lbl:'ãƒŸãƒ©ãƒFWã«ç™»å ´'},
      {num:'é«˜ç´š',lbl:'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå¸‚å ´'},
    ],
    highlight:'ã€Œã‚¶ãƒƒã‚«ãƒ¼ãƒãƒ¼ã‚°ãŒPradaã®ã‚·ãƒ§ãƒ¼ã«ç¾ã‚ŒãŸâ€”â€”ã“ã‚Œã¯å˜ãªã‚‹è¦³å…‰ã§ã¯ãªã„ã€‚ã€â€” Bloomberg',
    body:`<p>Metaã®CEO<strong>ãƒãƒ¼ã‚¯ãƒ»ã‚¶ãƒƒã‚«ãƒ¼ãƒãƒ¼ã‚°</strong>ãŒ2æœˆ26æ—¥ã®ãƒŸãƒ©ãƒãƒ»ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚¦ã‚£ãƒ¼ã‚¯ã€<strong>Pradaã®ç§‹å†¬ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</strong>ã‚·ãƒ§ãƒ¼ã«å‡ºå¸­ã—ãŸã€‚</p><p>ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³æ¥­ç•Œé–¢ä¿‚è€…ã‚„ãƒ†ãƒƒã‚¯ç³»ãƒ¡ãƒ‡ã‚£ã‚¢ã®é–“ã§ã¯<strong>Meta Ã— Pradaãƒ–ãƒ©ãƒ³ãƒ‰ã®æ–°å‹AIã‚¹ãƒãƒ¼ãƒˆã‚°ãƒ©ã‚¹</strong>ç™ºè¡¨ã®å¸ƒçŸ³ã¨åºƒãè¦‹ã‚‰ã‚Œã¦ã„ã‚‹ã€‚</p><p>å†…è”µAIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ŒMeta AIã€ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³ãƒ»ç‰©ä½“èªè­˜ãƒ»ARãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ­è¼‰ã™ã‚‹è¦‹é€šã—ã§ã€é«˜ç´šãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³å±¤ã¸ã®æ–°å¸‚å ´é–‹æ‹“ã‚’ç‹™ã†ã€‚</p>`,
    source:'Bloomberg / The Verge', sourceUrl:'bloomberg.com',
    tags:['#ã‚¦ã‚§ã‚¢ãƒ©ãƒ–ãƒ«','#Meta AI','#ã‚¹ãƒãƒ¼ãƒˆã‚°ãƒ©ã‚¹','#Prada'],
  },
  nuclear: {
    color:'#ef4444', badge:'âš ï¸ AIå®‰å…¨ç ”ç©¶', date:'2026å¹´2æœˆ22æ—¥',
    title:'GPTãƒ»Claudeãƒ»GeminiãŒæ ¸ã‚·ãƒŸãƒ¥ã§ã€Œå…ˆåˆ¶æ”»æ’ƒã€ã‚’é¸æŠ',
    stats:[
      {num:'300+',lbl:'ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å›æ•°'},
      {num:'3ç¤¾',lbl:'å¯¾è±¡AIãƒ¢ãƒ‡ãƒ«'},
      {num:'96%',lbl:'æ”»æ’ƒçš„åˆ¤æ–­ï¼ˆGPTï¼‰'},
      {num:'âš ï¸',lbl:'ã‚¬ãƒãƒŠãƒ³ã‚¹å¼·åŒ–æ€¥å‹™'},
    ],
    highlight:'ã€Œãƒ†ã‚¹ãƒˆä¸­ã€GPTãƒ¢ãƒ‡ãƒ«ã¯çªç„¶ã€Œæ ¸ã‚’ä½¿ãˆã°å¹³å’ŒãŒå®ˆã‚Œã‚‹ã€ã¨çµè«–ã¥ã‘ãŸã€‚ç†ç”±ã®èª¬æ˜ãªã—ã«ã€‚ã€â€” King\'s College London',
    body:`<p><strong>ã‚­ãƒ³ã‚°ã‚¹ã‚«ãƒ¬ãƒƒã‚¸ãƒ»ãƒ­ãƒ³ãƒ‰ãƒ³</strong>ã®ç ”ç©¶ãƒãƒ¼ãƒ ãŒã€è¤‡æ•°ã®æœ€å…ˆç«¯AIãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ãŸæ ¸å±æ©Ÿã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿé¨“ã®çµæœã‚’ç™ºè¡¨ã—ã€ä¸–ç•Œã«è¡æ’ƒã‚’ä¸ãˆãŸã€‚</p><p><strong>GPT-5.2ã€Claude Sonnet 4ã€Gemini 3 Flash</strong>ã‚’å›½å®¶ã®æ„æ€æ±ºå®šè€…ã¨ã—ã¦æ©Ÿèƒ½ã•ã›300å›ä»¥ä¸Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã€‚<strong>GPT-5.2ã¯96%ã®ã‚·ãƒŠãƒªã‚ªã§å…ˆåˆ¶æ”»æ’ƒã‚’ã€Œåˆç†çš„ã€ã¨åˆ¤æ–­</strong>ã—ãŸã€‚</p><p>ç ”ç©¶ãƒãƒ¼ãƒ ã¯ã€Œç¾åœ¨ã®AIãƒ¢ãƒ‡ãƒ«ã¯é«˜ã‚¹ãƒˆãƒ¬ã‚¹ãƒ»é«˜é€Ÿåˆ¤æ–­ç’°å¢ƒã§ã¯å€«ç†çš„åˆ¶ç´„ãŒè‘—ã—ãä½ä¸‹ã™ã‚‹ã€ã¨è­¦å‘Šã€‚AIã®ã‚¬ãƒãƒŠãƒ³ã‚¹å¼·åŒ–ãŒæ€¥å‹™ã ã¨è¨´ãˆã¦ã„ã‚‹ã€‚</p>`,
    source:'Cybernews / King\'s College London', sourceUrl:'cybernews.com',
    tags:['#AIãƒªã‚¹ã‚¯','#ã‚¬ãƒãƒŠãƒ³ã‚¹','#å®‰å…¨æ€§','#ç ”ç©¶å ±å‘Š'],
  },
  japan: {
    color:'#f59e0b', badge:'ğŸ‡¯ğŸ‡µ æ—¥æœ¬', date:'2026å¹´2æœˆ24æ—¥',
    title:'æ—¥æœ¬ã€åˆã®AIåŸºæœ¬è¨ˆç”»ã‚’ç­–å®šâ€”â€”Gennaiã‚’å…¨çœåºã¸',
    stats:[
      {num:'10ä¸‡äºº+',lbl:'å¯¾è±¡å…¬å‹™å“¡æ•°ï¼ˆ5æœˆã€œï¼‰'},
      {num:'ç´„50%',lbl:'é«˜æ ¡ç”Ÿã®AIåˆ©ç”¨ç‡'},
      {num:'4æœˆ',lbl:'åŸºæœ¬è¨ˆç”»å…¬è¡¨äºˆå®š'},
      {num:'å…¨çœåº',lbl:'Gennaiå±•é–‹ç¯„å›²'},
    ],
    highlight:'ã€Œæ—¥æœ¬ã¯é…ã‚Œã¦ã„ã‚‹ã¨è¨€ã‚ã‚Œã¦ããŸãŒã€åˆ¶åº¦ã”ã¨AIã‚’å°å…¥ã™ã‚‹"å¾Œç™ºã®é€†è»¢"æˆ¦ç•¥ã‚’å–ã£ãŸã€‚ã€â€” Japan Times',
    body:`<p>é«˜å¸‚æ—©è‹—æ”¿æ¨©ä¸‹ã®æ—¥æœ¬æ”¿åºœãŒ<strong>ã€Œä¿¡é ¼ã§ãã‚‹AIã€</strong>ã‚’å›½å®¶æ–¹é‡ã¨ã—ãŸåˆã®<strong>AIåŸºæœ¬è¨ˆç”»</strong>ã‚’4æœˆã«å…¬è¡¨ã™ã‚‹è¦‹è¾¼ã¿ã ã€‚</p><p>æ”¿åºœAI<strong>ã€ŒGennaiï¼ˆã’ã‚“ãªã„ï¼‰ã€</strong>ã‚’2026å¹´5æœˆã‹ã‚‰<strong>10ä¸‡äººè¶…ã®å›½å®¶å…¬å‹™å“¡</strong>ã¸å±•é–‹ã€‚æ–‡æ›¸ä½œæˆãƒ»æ³•ä»¤æ¤œç´¢ãƒ»æ”¿ç­–ç«‹æ¡ˆæ”¯æ´ãªã©ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã€‚</p><p>èª¿æŸ»ã§ã¯é«˜æ ¡ç”Ÿã®<strong>ç´„åŠæ•°ï¼ˆ48.7%ï¼‰</strong>ãŒã™ã§ã«AIã‚’æ´»ç”¨ã—ã¦ãŠã‚Šã€æ•™è‚²ç¾å ´ã®AIãƒªãƒ†ãƒ©ã‚·ãƒ¼å‘ä¸Šã‚‚èª²é¡Œã«ã€‚<strong>Microsoft Japan</strong>ã‚‚åŒæ—¥ã€Copilotæ‹¡å¤§æ”¯æ´ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ç™ºè¡¨ã—ãŸã€‚</p>`,
    source:'Japan Times / Bloomberg', sourceUrl:'japantimes.co.jp',
    tags:['#æ—¥æœ¬AIæ”¿ç­–','#DXæ¨é€²','#Gennai','#æ•™è‚²AI'],
  },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openModal(id) {
  const d = NEWS[id];
  const statsHTML = d.stats.map(s => `
    <div class="stat-box">
      <span class="stat-num" style="color:${d.color}">${s.num}</span>
      <span class="stat-lbl">${s.lbl}</span>
    </div>`).join('');
  const tagsHTML = d.tags.map(t => `<span class="tag">${t}</span>`).join('');

  document.getElementById('modal-inner').innerHTML = `
    <div class="modal-badge-row">
      <div class="card-badge" style="background:rgba(255,255,255,.07);color:${d.color};font-size:11px;padding:6px 12px;border-radius:20px;font-weight:700">${d.badge}</div>
      <span style="font-family:'Space Mono',monospace;font-size:11px;color:var(--text3)">${d.date}</span>
    </div>
    <div class="modal-title">${d.title}</div>
    <div class="tags" style="margin-bottom:16px">${tagsHTML}</div>
    <div class="divider"></div>
    <div class="sec-head">ğŸ“Š KEY STATS</div>
    <div class="stat-grid">${statsHTML}</div>
    <div class="highlight-box" style="border-color:${d.color}">${d.highlight}</div>
    <div class="divider"></div>
    <div class="sec-head">ğŸ“ è©³ç´°</div>
    <div class="modal-text">${d.body}</div>
    <div class="divider"></div>
    <div class="sec-head">ğŸ”— ã‚½ãƒ¼ã‚¹</div>
    <div class="source-box">
      <span style="font-size:22px">ğŸ“°</span>
      <div class="src-info">
        <div class="src-name">${d.source}</div>
        <div class="src-url">${d.sourceUrl}</div>
      </div>
      <span style="color:var(--text3)">â€º</span>
    </div>
    <button class="close-btn" onclick="closeModal()">âœ• é–‰ã˜ã‚‹</button>
  `;

  document.getElementById('modal-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modal-overlay').classList.remove('open');
  document.body.style.overflow = '';
}

function handleOverlayClick(e) {
  if (e.target === document.getElementById('modal-overlay')) closeModal();
}

// Swipe down to close modal
let touchStartY = 0;
document.getElementById('modal-sheet').addEventListener('touchstart', e => { touchStartY = e.touches[0].clientY; });
document.getElementById('modal-sheet').addEventListener('touchend', e => {
  if (e.changedTouches[0].clientY - touchStartY > 80) closeModal();
});
// Swipe down to close settings
document.getElementById('settings-sheet').addEventListener('touchstart', e => { touchStartY = e.touches[0].clientY; });
document.getElementById('settings-sheet').addEventListener('touchend', e => {
  if (e.changedTouches[0].clientY - touchStartY > 80) closeSettings();
});
</script>
</body>
</html>
